<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="835"/>

<div>
<span><div><b>K-Means算法：</b></div><div><br/></div><div><p style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">在数据挖掘中，K-Means算法是一种<a href="http://en.wikipedia.org/wiki/Cluster_analysis" style="cursor: pointer; color: rgb(0, 102, 204); text-decoration: none;" target="_blank">cluster analysis</a>的算法，其主要是来计算数据聚集的算法，主要通过不断地取离种子点最近均值的算法。</p><h4 style="margin: 0.75em 0px; padding: 0px; list-style: none; text-decoration: none; display: block; color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: bold; font-stretch: normal; font-size: 14px; font-family: Helvetica, Tahoma, Arial, sans-serif; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">问题</h4><p style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">K-Means算法主要解决的问题如下图所示。我们可以看到，在图的左边有一些点，我们用肉眼可以看出来有四个点群，但是我们怎么通过计算机程序找出这几个点群来呢？于是就出现了我们的K-Means算法（<a href="http://en.wikipedia.org/wiki/K-means_clustering" style="cursor: pointer; color: rgb(0, 102, 204); text-decoration: none;" target="_blank" title="K-means Clustering 算法">Wikipedia链接</a>）</p><p style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-align: center;"><img src="K-Means算法：_files/Image.gif" type="image/gif" height="300" style="vertical-align: middle; border: none; width: 482px; height: auto;" title="K-Means 要解决的问题" width="600"/></p><div style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-align: center;"><div>K-Means要解决的问题</div></div></div><div><p style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><strong>算法概要</strong></p><div style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div>这个算法其实很简单，如下图所示： </div></div></div><div><img src="K-Means算法：_files/Image.png" type="image/png" style="height: auto;"/></div><div><p style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">从上图中，我们可以看到，<strong>A，B，C，D，E是五个在图中点。而灰色的点是我们的种子点，也就是我们用来找点群的点</strong>。有两个种子点，所以K=2。</p><p style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">然后，K-Means的算法如下：</p><ol style="margin: 0px 0px 1em 30px; padding: 0px; list-style: decimal; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="margin: 0px; padding: 0px; list-style: decimal; text-decoration: none;">随机在图中取K（这里K=2）个种子点。</li><li style="margin: 0px; padding: 0px; list-style: decimal; text-decoration: none;">然后对图中的所有点求到这K个种子点的距离，假如点Pi离种子点Si最近，那么Pi属于Si点群。（上图中，我们可以看到A，B属于上面的种子点，C，D，E属于下面中部的种子点）</li><li style="margin: 0px; padding: 0px; list-style: decimal; text-decoration: none;">接下来，我们要移动种子点到属于他的“点群”的中心。（见图上的第三步）</li><li style="margin: 0px; padding: 0px; list-style: decimal; text-decoration: none;">然后重复第2）和第3）步，直到，种子点没有移动（我们可以看到图中的第四步上面的种子点聚合了A，B，C，下面的种子点聚合了D，E）。</li></ol><div style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: Helvetica, Tahoma, Arial, sans-serif;">这个算法很简单，但是有些细节我要提一下，求距离的公式我不说了，大家有初中毕业水平的人都应该知道怎么算的。我重点想说一下“求点群中心的算法”。</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: Helvetica, Tahoma, Arial, sans-serif;"><br/></span></span></span></div><div><h4 style="margin: 0.75em 0px; padding: 0px; list-style: none; text-decoration: none; display: block; color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: bold; font-stretch: normal; font-size: 14px; font-family: Helvetica, Tahoma, Arial, sans-serif; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">求点群中心的算法</h4><p style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">一般来说，求点群中心点的算法你可以很简的使用各个点的X/Y坐标的平均值。不过，我这里想告诉大家另三个求中心点的的公式：</p><p style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><strong>1）Minkowski Distance公式——</strong>λ可以随意取值，可以是负数，也可以是正数，或是无穷大。</p><p style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-align: center;"><img src="K-Means算法：_files/Image [1].gif" type="image/gif" height="51" style="vertical-align: middle; border: none; height: auto;" title="Minkowski Distance 公式" width="131"/></p><p style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><strong>2）Euclidean Distance公式</strong>——也就是第一个公式λ=2的情况</p><p style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-align: center;"><img src="K-Means算法：_files/Image [2].gif" type="image/gif" height="51" style="vertical-align: middle; border: none; height: auto;" title="Euclidean Distance 公式" width="137"/></p><p style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><strong>3）CityBlock Distance公式</strong>——也就是第一个公式λ=1的情况</p><p style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-align: center;"><img src="K-Means算法：_files/Image [3].gif" type="image/gif" height="45" style="vertical-align: middle; border: none; height: auto;" title="CityBlock Distance 公式" width="111"/></p><div style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 14px;"><span style="font-family: Helvetica, Tahoma, Arial, sans-serif;">这三个公式的求中心点有一些不一样的地方，我们看下图（对于第一个λ在0-1之间）。</span></span></span></div><div><span style="font-size: 14px;"><span style="font-family: Helvetica, Tahoma, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><b><span style="font-size: 14px;"><span style="font-family: Helvetica, Tahoma, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);">算法Java实现：</span></span></span></b></div><div><img src="K-Means算法：_files/Image [1].png" type="image/png"/></div><div><br/></div><div><b>kMeansData</b> 封装数据坐标点和属于哪一类，初始都属于0类</div><div><b>kMeansTest</b> main程序，输入所有点，调用kMeans中的cluster方法进行聚类</div><div><b>kMeans</b> 为主要算法代码，即算法的整个过程</div><div><br/></div><div>其中，kMeansData<span>实现了Comparale类，比较种子点和所有点的距离，通过kMeans算法中的Collection.sort(kList),进行从小到大排序，取距离最近的种子点kList.get(0)的类型为点kd的类型</span></div><div align="left" style="min-height: 14pt;"><div><font face="Consolas"><span style="font-size:12pt; background:#e8f2fe">kd.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt; background:#e8f2fe">type</span></font><font face="Consolas"><span style="font-size:12pt; background:#e8f2fe">=kList.get(0).</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt; background:#e8f2fe">type</span></font><font face="Consolas"><span style="font-size:12pt; background:#e8f2fe">;</span></font></div></div><div><br/></div><div><span style="font-size: 14px;"><span style="font-family: Helvetica, Tahoma, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);">主要算法代码：</span></span></span></div><div align="left" style="min-height: 14pt;"><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//1、取k个随机种子点</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>static</b></span></font> <font face="Consolas"><span style="font-size:12pt">List&lt;kMeansData&gt; random(</span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:12pt">k)</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">     {</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           List&lt;kMeansData&gt; kList1 =</span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>new</b></span></font> <font face="Consolas"><span style="font-size:12pt">ArrayList&lt;kMeansData&gt;();</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>for</b></span></font><font face="Consolas"><span style="font-size:12pt">(</span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:12pt">i=0;i&lt;k;i++)</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           {</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>double</b></span></font> <font face="Consolas"><span style="font-size:12pt">randomx=Math.</span><span style="font-size:12pt"><i>random</i></span><span style="font-size:12pt">()*100%100;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>double</b></span></font> <font face="Consolas"><span style="font-size:12pt">randomy=Math.</span><span style="font-size:12pt"><i>random</i></span><span style="font-size:12pt">()*100%100;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                kList1.add(</span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>new</b></span></font> <font face="Consolas"><span style="font-size:12pt">kMeansData(randomx,randomy,i));</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           }</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>return</b></span></font> <font face="Consolas"><span style="font-size:12pt">kList1;  </span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">     </span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//2、计算所有点到种子点的距离，选出离每个点最近的种子点，将该种子点的类型赋予该点</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>static</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>void</b></span></font> <font face="Consolas"><span style="font-size:12pt">calculate(List&lt;kMeansData&gt; kList,List&lt;kMeansData&gt; kData)</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">     {</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           </span></font><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//遍历所有的点和种子点，计算两者距离</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>for</b></span></font><font face="Consolas"><span style="font-size:12pt">(kMeansData kd:kData)</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           {</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>for</b></span></font><font face="Consolas"><span style="font-size:12pt">(kMeansData ks:kList)</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                {</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                     ks.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">distance</span></font><font face="Consolas"><span style="font-size:12pt">=</span><span style="font-size:12pt"><i>disCal</i></span><span style="font-size:12pt">(kd,ks);</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                }    </span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                </span></font><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//将kList进行按距离从小到大排序，取距离最近的K为</span><span style="font-size:12pt"><u>kd</u></span><span style="font-size:12pt">的type</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                Collections.</span><span style="font-size:12pt"><i>sort</i></span><span style="font-size:12pt">(kList);</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                kd.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">type</span></font><font face="Consolas"><span style="font-size:12pt">=kList.get(0).</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">type</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           }</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">     </span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>static</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>double</b></span></font> <font face="Consolas"><span style="font-size:12pt">disCal(kMeansData kd,kMeansData ks)</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">     {</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>return</b></span></font> <font face="Consolas"><span style="font-size:12pt">Math.</span><span style="font-size:12pt"><i>sqrt</i></span><span style="font-size:12pt">((kd.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">x</span></font><font face="Consolas"><span style="font-size:12pt">-ks.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">x</span></font><font face="Consolas"><span style="font-size:12pt">)*(kd.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">x</span></font><font face="Consolas"><span style="font-size:12pt">-ks.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">x</span></font><font face="Consolas"><span style="font-size:12pt">)</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                     +(kd.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">y</span></font><font face="Consolas"><span style="font-size:12pt">-ks.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">y</span></font><font face="Consolas"><span style="font-size:12pt">)*(kd.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">y</span></font><font face="Consolas"><span style="font-size:12pt">-ks.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">y</span></font><font face="Consolas"><span style="font-size:12pt">)); </span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">     }</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">     </span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//3、将种子点移动到点群中心位置,返回种子点是否移动</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>public</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>static</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>boolean</b></span></font> <font face="Consolas"><span style="font-size:12pt">move(</span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:12pt">k,List&lt;kMeansData&gt; kList,List&lt;kMeansData&gt; kData)</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">     {</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>double</b></span></font> <font face="Consolas"><span style="font-size:12pt">sumx=0;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>double</b></span></font> <font face="Consolas"><span style="font-size:12pt">sumy=0;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:12pt">t=1;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>double</b></span></font> <font face="Consolas"><span style="font-size:12pt">beforex,beforey;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>int</b></span></font> <font face="Consolas"><span style="font-size:12pt">m=0;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           </span></font><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//遍历所有的点和种子点，计算两者距离</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>for</b></span></font><font face="Consolas"><span style="font-size:12pt">(kMeansData ks:kList)</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           {</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                beforex=ks.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">x</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                beforey=ks.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">y</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>for</b></span></font><font face="Consolas"><span style="font-size:12pt">(kMeansData kd:kData)</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                {</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                     </span></font><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//找出种子点</span><span style="font-size:12pt"><u>ks</u></span><span style="font-size:12pt">的点群</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                     </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>if</b></span></font><font face="Consolas"><span style="font-size:12pt">(kd.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">type</span></font><font face="Consolas"><span style="font-size:12pt">==ks.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">type</span></font><font face="Consolas"><span style="font-size:12pt">)</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                     {</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                           sumx+=kd.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">x</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                           sumy+=kd.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">y</span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                           ++t;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                     }                               </span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                }</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                </span></font><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//移动种子点到点群中心位置</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                ks.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">x</span></font><font face="Consolas"><span style="font-size:12pt">=sumx/t;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                ks.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">y</span></font><font face="Consolas"><span style="font-size:12pt">=sumy/t;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                System.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt"><i>out</i></span></font><font face="Consolas"><span style="font-size:12pt">.println(</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot;x:&quot;</span></font><font face="Consolas"><span style="font-size:12pt">+ks.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">x</span></font><font face="Consolas"><span style="font-size:12pt">+</span></font><font color="#2A00FF" face="Consolas"><span style="font-size:12pt">&quot; y:&quot;</span></font><font face="Consolas"><span style="font-size:12pt">+ks.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">y</span></font><font face="Consolas"><span style="font-size:12pt">);</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                t=1;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>if</b></span></font><font face="Consolas"><span style="font-size:12pt">(beforex==ks.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">x</span></font><font face="Consolas"><span style="font-size:12pt">&amp;&amp;beforey==ks.</span></font><font color="#0000C0" face="Consolas"><span style="font-size:12pt">y</span></font><font face="Consolas"><span style="font-size:12pt">)</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                {</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                     m++;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                }</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           }</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           </span></font><font color="#3F7F5F" face="Consolas"><span style="font-size:12pt">//如果所有的种子点都没有移动，则返回false</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>if</b></span></font><font face="Consolas"><span style="font-size:12pt">(m==k)</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           {</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">                </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>return</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>false</b></span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           }</span></font></div><div align="left" style="min-height: 14pt;"><font face="Consolas"><span style="font-size:12pt">           </span></font><font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>return</b></span></font> <font color="#7F0055" face="Consolas"><span style="font-size:12pt"><b>true</b></span></font><font face="Consolas"><span style="font-size:12pt">;</span></font></div><div align="left" style="min-height: 14pt;"><div><font face="Consolas"><span style="font-size:12pt">     }</span></font></div></div><div><span style="font-size: 14px;"><span style="font-family: Helvetica, Tahoma, Arial, sans-serif;"><span style="color: rgb(51, 51, 51);"><br/></span></span></span></div><div><h4 style="margin: 0.75em 0px; padding: 0px; list-style: none; text-decoration: none; display: block; color: rgb(51, 51, 51); font-style: normal; font-variant: normal; font-weight: bold; font-stretch: normal; font-size: 14px; font-family: Helvetica, Tahoma, Arial, sans-serif; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">K-Means++算法</h4><p style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">K-Means主要有两个最重大的缺陷——都和初始值有关：</p><ul style="margin: 0px 0px 1em 20px; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="margin: 0px; padding: 0px; list-style: disc; text-decoration: none;">K是事先给定的，这个K值的选定是非常难以估计的。很多时候，事先并不知道给定的数据集应该分成多少个类别才最合适。（<a href="http://en.wikipedia.org/wiki/Multispectral_pattern_recognition" style="cursor: pointer; color: rgb(0, 102, 204); text-decoration: none;" target="_blank">ISODATA算法</a>通过类的自动合并和分裂，得到较为合理的类型数目K）</li></ul><ul style="margin: 0px 0px 1em 20px; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="margin: 0px; padding: 0px; list-style: disc; text-decoration: none;">K-Means算法需要用初始随机种子点来搞，这个随机种子点太重要，不同的随机种子点会有得到完全不同的结果。（<a href="http://en.wikipedia.org/wiki/K-means%2B%2B" style="cursor: pointer; color: rgb(0, 102, 204); text-decoration: none;" target="_blank">K-Means++算法</a>可以用来解决这个问题，其可以有效地选择初始点）</li></ul><p style="margin: 0px 0px 1.5em; padding: 0px; list-style: none; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">我在这里重点说一下K-Means++算法步骤：</p><ol style="margin: 0px 0px 1em 30px; padding: 0px; list-style: decimal; text-decoration: none; color: rgb(51, 51, 51); font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="margin: 0px; padding: 0px; list-style: decimal; text-decoration: none;">先从我们的数据库随机挑个随机点当“种子点”。</li><li style="margin: 0px; padding: 0px; list-style: decimal; text-decoration: none;">对于每个点，我们都计算其和最近的一个“种子点”的距离D(<var>x</var>)并保存在一个数组里，然后把这些距离加起来得到Sum(D(<var>x</var>))。</li><li style="margin: 0px; padding: 0px; list-style: decimal; text-decoration: none;">然后，再取一个随机值，用权重的方式来取计算下一个“种子点”。这个算法的实现是，先取一个能落在Sum(D(<var>x</var>))中的随机值Random，然后用Random -= D(<var>x</var>)，直到其&lt;=0，此时的点就是下一个“种子点”。</li><li style="margin: 0px; padding: 0px; list-style: decimal; text-decoration: none;">重复第（2）和第（3）步直到所有的K个种子点都被选出来。</li><li style="margin: 0px; padding: 0px; list-style: decimal; text-decoration: none;">进行K-Means算法。</li></ol><div style="margin: 0px; padding: 0px; list-style: decimal; text-decoration: none;"><div><br/></div><div><br/></div><div><br/></div></div></div></div></div></div></div></span>
</div></body></html> 